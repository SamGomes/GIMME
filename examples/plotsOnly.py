import matplotlib.pyplot as plt
import numpy as np 
import seaborn as sns
import matplotlib.collections as collections

maxNumTrainingIterations = 20
numRealIterations = 20

GIMMEAbilityMeans = [0.32788280316291435, 0.34823899998823565, 0.35221047490561097, 0.35526979383144036, 0.3549769717011178, 0.3587416344563396, 0.3600134323456845, 0.3621627672736143, 0.363742690017788, 0.36604064067102976, 0.3666865846799893, 0.3667211465383608, 0.3667607099296731, 0.3664881178361091, 0.36790129820752454, 0.36593080858344823, 0.3654326232132489, 0.3667037276310321, 0.3666032221577468, 0.36681715140794957, 0.36481064181648337, 0.3843621007192697, 0.38679968152927496, 0.38796874247356994, 0.38871531302825785, 0.390445963765652, 0.39138984049903186, 0.39306281492071826, 0.3939030697120506, 0.39506731304366666, 0.39538825160798324, 0.3957132251617034, 0.39509699213031163, 0.3940227757609388, 0.3937046529091305, 0.3950484984234933, 0.39504048934587016, 0.3945859710087972, 0.39495218458623477, 0.3949890375352966]
GIMMEAbilitySTDev = [0.02881201016111268, 0.027232426631951648, 0.028789000986619642, 0.030042011428566124, 0.029417800743487568, 0.028387611178705245, 0.029182283518719827, 0.028522386456396445, 0.028812664534610594, 0.0282938265452271, 0.028872241660869824, 0.02837026249855532, 0.02847952837214279, 0.02845341938335473, 0.02838352687690083, 0.02797047669749916, 0.028299735135563813, 0.028346224177664584, 0.027819230072839287, 0.028564523008593027, 0.028295585038448902, 0.029829476131407878, 0.029627289208460656, 0.0308402865469588, 0.02939949982448407, 0.030613678965615, 0.02937105356418295, 0.030144985940403234, 0.02942423856783531, 0.029869799520586052, 0.03026602442571173, 0.02996659476340647, 0.030693046936720977, 0.030136391595870657, 0.02992351151544292, 0.030421685227931494, 0.030091940096057274, 0.029187893084493183, 0.029787121189796185, 0.02987508564372308]
GIMMEEngagementMeans = [0.6526349010590471, 0.6939547544031404, 0.7009125441092108, 0.7066446604985753, 0.7065895782266944, 0.7138079457304671, 0.7155661275045233, 0.7197462985315283, 0.7232249592135837, 0.7285092946829282, 0.7293175763860601, 0.7292989755576665, 0.7294329381216381, 0.7294924159628722, 0.7319157769646072, 0.7281734086997835, 0.7269378178376017, 0.7287447764989647, 0.7293200633511709, 0.7296443785901017, 0.7256320935289342, 0.7647104445549887, 0.7695068910814744, 0.7720208949229715, 0.7734762558715372, 0.7759958739426142, 0.7783294767332669, 0.781489329537536, 0.7825313351159254, 0.785254316832925, 0.7859069118928582, 0.7867672855812199, 0.7855190967858368, 0.7842351186845219, 0.7829356635393239, 0.7863824469421705, 0.7856621028731982, 0.7851221510238496, 0.7849557276195953, 0.7853362821698359]
GIMMEEngagementSTDev = [0.03147774782143698, 0.027666838088066237, 0.028920558143334676, 0.028285639203155057, 0.028782852432009426, 0.02804376152003227, 0.027045357593349025, 0.024869124602732193, 0.024015572444884965, 0.023452562260632165, 0.023940866251070093, 0.023232511477645795, 0.02298643330162976, 0.025478930909636786, 0.023830047882696496, 0.024651249268394845, 0.026383554315255756, 0.023926925665258555, 0.022986606462108664, 0.023785272958856168, 0.025374892800991776, 0.02556549060043557, 0.02485316557363593, 0.02430008052463983, 0.023040095379035862, 0.022623598386080454, 0.0221746180743705, 0.022160156272235165, 0.022197634319929327, 0.02030915814589234, 0.021800767906737437, 0.021588945929789757, 0.021865196555607137, 0.02114464641850341, 0.022811074380631388, 0.02129805133708739, 0.019851963972288517, 0.021494809038831515, 0.020688765106459752, 0.021693382060100505]
GIMMEProfDiffMeans = [0.4426713219986452, 0.42973780560212105, 0.4224556522160783, 0.4144404451522709, 0.4149490977132045, 0.4041994049481251, 0.40211937458087643, 0.3960274458083182, 0.39116009171622923, 0.3835525123129624, 0.382742592310496, 0.3828304446169437, 0.38262963729903926, 0.3825510669979948, 0.3789479677593711, 0.38469940508070444, 0.3862602092460378, 0.38347831986362774, 0.3827564175516625, 0.3823164469348746, 0.33400435399225176, 0.32984098913105925, 0.32560947015406755, 0.322224019267693, 0.3202446252938149, 0.316602132147987, 0.3133157649760637, 0.30878555860226, 0.30746957640596345, 0.3034935798236218, 0.30272477466490544, 0.3014925570864158, 0.3034147077493338, 0.3052331908741006, 0.3070720499559955, 0.30184428870402724, 0.30317317790788006, 0.30392335812975496, 0.30413091378656787, 0.30355201555715594]
GIMMEProfDiffSTDev = [0.04685921882320221, 0.040554317897308415, 0.04224603011797991, 0.041220588922187024, 0.041983727949138246, 0.04071295611886341, 0.039321351857342056, 0.03591973882516772, 0.0348255422462718, 0.033959221891834195, 0.03473777807079394, 0.03362704335524554, 0.03326233863919404, 0.03709260917406835, 0.03448061132138929, 0.03585586480425231, 0.03831394932413358, 0.03467110874962679, 0.033387655780271364, 0.034416022094738784, 0.03777422899254565, 0.03778569042359091, 0.0365081510934224, 0.035731500926619086, 0.0340401872458493, 0.033163180338686864, 0.03257820842403086, 0.032514932766662376, 0.032524312935658765, 0.02980681013228831, 0.03199922405710744, 0.03153776740084098, 0.0319598508212564, 0.03088856714543033, 0.03341678564753032, 0.031210706059209337, 0.028926014446860094, 0.03149882934987438, 0.030249056034530167, 0.031894387234333514]

GIMMEOldAbilityMeans = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.3543984332820961, 0.37720148195527287, 0.3803775151341241, 0.382172589118423, 0.3836029005462023, 0.3864571714153927, 0.3872254974402284, 0.3890849157485702, 0.39268968828221307, 0.39441442766448076, 0.39451746562585155, 0.3948473389059694, 0.3938025291274264, 0.3950507036218623, 0.39469579553037243, 0.3935642299518866, 0.3938857468860794, 0.3929830040379781, 0.3941584205948491, 0.39349849068927056]
GIMMEOldAbilitySTDev = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.027755584326956066, 0.027847695319644455, 0.030058490554918424, 0.029221225730889606, 0.02840637878388629, 0.02846075583930205, 0.028275374823501852, 0.028153448791584355, 0.02876668882242421, 0.02897452838448741, 0.02751749771326003, 0.028558023899957263, 0.02854367593782314, 0.029007204008574303, 0.02839793453731666, 0.029155794788245395, 0.02892049383546314, 0.028407169751019565, 0.02897067653539608, 0.02840808387439699]
GIMMEOldEngagementMeans = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.7074155362446245, 0.7541417594607328, 0.7599638570700229, 0.7632869161184747, 0.7658960221076953, 0.7717713213988137, 0.7731654601863512, 0.7766401725928008, 0.7839331412515826, 0.7870015337539178, 0.7874552625885751, 0.788341701009351, 0.7854279568803259, 0.7881167544286962, 0.7880373716411185, 0.7858636359155334, 0.7862762373663787, 0.7848865798530171, 0.7871223769585176, 0.7856764434134516]
GIMMEOldEngagementSTDev = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.02601691259597926, 0.025074905765971243, 0.028390803381333908, 0.027274936450494194, 0.026352723625395636, 0.02510482954697482, 0.021325081279983775, 0.023039982373902593, 0.020864221556845166, 0.021583578715717665, 0.02024238923931429, 0.020442354237644008, 0.022238349741629318, 0.021979445260404504, 0.02129497188996083, 0.02124569654941382, 0.022853445419392753, 0.02251534522116488, 0.021838117709628565, 0.020400104182124946]
GIMMEOldProfDiffMeans = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.3611223564882702, 0.3442181182659933, 0.339029016717588, 0.33451551071247204, 0.33087881879996617, 0.3223267806034193, 0.32068871367274515, 0.31561986639749323, 0.30502184964308887, 0.3009969322408518, 0.30054987818081197, 0.2992640573773493, 0.3036675701419774, 0.2994480261602836, 0.2997663323842626, 0.302996346419417, 0.30222033284589483, 0.3043197516151901, 0.30088800612631017, 0.3032069046096681]
GIMMEOldProfDiffSTDev = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.03872996909926799, 0.03704343479267916, 0.04182682291254275, 0.039937505701499024, 0.03868562161498767, 0.0368075110812226, 0.031276844800245514, 0.03391453886964588, 0.03049220677928741, 0.03162872747436388, 0.02953172032828643, 0.029955547104238395, 0.03262707886675792, 0.03215129879874543, 0.03113733879661808, 0.031271469491860784, 0.03353895526403242, 0.03288500970125285, 0.031926791960900584, 0.02975891052757369]

optimalAbilityMeans = [0.3602635923505468, 0.3782362700107354, 0.3792662888206428, 0.3791917236742285, 0.37917275257641997, 0.3795651201075257, 0.3793193300733173, 0.3795032721081478, 0.3793565766326111, 0.37929886223277925, 0.37911157923240374, 0.37933054071768185, 0.37930380012957005, 0.37939562262497173, 0.3793989456063367, 0.3791746750823564, 0.3791275276525014, 0.37923718092086744, 0.3794226703204523, 0.37947485654791163, 0.3809264026586092, 0.3997042897177444, 0.40078796074121137, 0.40092296295261093, 0.4010303901124376, 0.40086875966613067, 0.40088598020598437, 0.40108212705534496, 0.4008263646112519, 0.40093705132229285, 0.4008575693818429, 0.40090281482090107, 0.4008337138901053, 0.4008467484110739, 0.40087469620327265, 0.40053237140070347, 0.40089833696196603, 0.40095785107169696, 0.4009738811989782, 0.40080110075107633]
optimalAbilitySTDev = [0.026528753834449456, 0.027824201882000753, 0.0280770893343096, 0.027854207480613596, 0.027738812069515274, 0.027822557822011165, 0.02805448901383333, 0.02803631666933907, 0.028130904606627174, 0.02772062958064721, 0.027994845028591706, 0.02810801990985394, 0.027761602760230965, 0.02794461937842264, 0.02804067885045525, 0.02811675788166103, 0.027812743712730223, 0.027945302614035678, 0.027679488705935295, 0.027901290809777272, 0.027708411577382623, 0.02909443706248024, 0.02927925695401499, 0.029329999584083784, 0.02934394599208024, 0.02922920385573755, 0.029069206317309918, 0.02907217979297166, 0.029127286957682408, 0.029267651490457305, 0.029138042244755573, 0.029275187439227746, 0.02922962937555075, 0.029150782176648106, 0.02922468929795034, 0.029198892670685317, 0.029213111166840482, 0.029152931690577883, 0.029146714131782336, 0.02924600324026987]
optimalEngagementMeans = [0.7239021539583884, 0.760180736159736, 0.7622435883648719, 0.7619182705807965, 0.7618488975335045, 0.7627528600242844, 0.7620441125842116, 0.7624274397651607, 0.7626564183770088, 0.7621857794445935, 0.7616083150651305, 0.7619701099492863, 0.762207724870124, 0.7622386431389676, 0.7620843370102874, 0.761938430081285, 0.7619086702416906, 0.7621580677639231, 0.7625132425592075, 0.7626521850044693, 0.7661544767276847, 0.8040238598238958, 0.806077584917313, 0.8064425216879215, 0.8065890519369696, 0.8062444788268959, 0.8064196854775849, 0.806761871872288, 0.806367866010714, 0.8064995413512823, 0.8063474390608731, 0.8064061584652674, 0.8063422261212271, 0.8061388367029781, 0.8065369027760002, 0.8056754811572933, 0.8063031292422276, 0.8066270553078021, 0.8065883145308346, 0.8061726737315068]
optimalEngagementSTDev = [0.013998981860875701, 0.014514146444981045, 0.014985610552954949, 0.01460090775603119, 0.014500734596829714, 0.014372136708185577, 0.014827236481487665, 0.014837800710898328, 0.015134964364785675, 0.014422660665458196, 0.014432840647708603, 0.014718009640518165, 0.01482585013346212, 0.014621460514108692, 0.0145814743963888, 0.014930350531395612, 0.014977814845958027, 0.015053482968742543, 0.01427233379633329, 0.014760039133930668, 0.009683745769464177, 0.0100885196077596, 0.010545765391060174, 0.010191689660906321, 0.010723117430208156, 0.010294491145050946, 0.010384199282279268, 0.010219096968021047, 0.010383112095744175, 0.010224114355100537, 0.010370290127116313, 0.010194027877079724, 0.01009826474101157, 0.010359158006149132, 0.010576863507923617, 0.010447822059659332, 0.010575306887825292, 0.010149932723957592, 0.010172945283415663, 0.010552867387408531]
optimalProfDiffMeans = [0.3365796213635699, 0.3364553573900318, 0.3360847990563119, 0.3367226248464217, 0.3368016825971883, 0.33545083898713024, 0.3365731969268828, 0.3359498048108535, 0.33563746867036753, 0.33635512676944185, 0.3371797359896141, 0.33659816953716054, 0.33627137429287385, 0.33624303416346335, 0.3364750426599825, 0.3366807610461319, 0.3367142027207389, 0.336340723039895, 0.33583055678243773, 0.3356501571615377, 0.27368087620346027, 0.27433341032945324, 0.27409484599068623, 0.27370444784713055, 0.2735134792797803, 0.2740373331942765, 0.2737508651733322, 0.2732545118478926, 0.27386651675852935, 0.273641172048933, 0.2738773993906042, 0.2737786656704275, 0.2738782089092911, 0.2741762250927962, 0.2735685069424008, 0.2748804876350935, 0.27388202432886405, 0.27344653041998535, 0.27352831227678515, 0.2741441706650755]
optimalProfDiffSTDev = [0.020839526323236334, 0.020684325738612414, 0.021357839170293748, 0.020747244567082945, 0.02061905011972175, 0.0204166331017268, 0.021110886960347304, 0.02111424336187048, 0.021544382491397406, 0.020448519856792937, 0.020517886716915602, 0.02096662607686375, 0.02111023066858955, 0.02080625748060905, 0.02073910878869795, 0.021254436790146627, 0.02130277792922542, 0.021418963625605768, 0.0202444801721053, 0.021039115566230067, 0.014415668001871306, 0.01437123968176708, 0.015009968554327582, 0.014455414408090514, 0.015270555928187195, 0.014594738662524682, 0.014763249137689111, 0.014520987658507858, 0.014771289471752784, 0.01452403533592205, 0.014742430842332024, 0.014473720013005668, 0.014341091939551182, 0.01473853403079745, 0.015044923040677945, 0.014832437372482169, 0.015043395777759965, 0.01440392068720803, 0.014456848001971017, 0.015024503205799837]

randomAbilityMeans = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.35309184718483233, 0.3706835972033071, 0.371753950432934, 0.37005725412916923, 0.3723479861908357, 0.37178317134565075, 0.37166703692872094, 0.3728225516135352, 0.3729764281430933, 0.3724211346552054, 0.37203258031859726, 0.37167476191174, 0.37175108175478605, 0.37135693091083427, 0.37063597573084633, 0.3715416536725777, 0.37203009620095095, 0.37153271242614255, 0.3710247145052836, 0.37360857971377553]
randomAbilitySTDev = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.02705389613465749, 0.02951738438481143, 0.028793129597357567, 0.02867603363071965, 0.030496930721470368, 0.029800313250583507, 0.029488284047011506, 0.029938749994375357, 0.028519495604884607, 0.02933899264238054, 0.029361531717527912, 0.029593661542185984, 0.029810219772227472, 0.02931264730135311, 0.028867894450813537, 0.02929461890669719, 0.02747951726944757, 0.02861090437961716, 0.029681544478575673, 0.029918995749799088]
randomEngagementMeans = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.7055059191850778, 0.7412335135911918, 0.7429358541630172, 0.7394896475221527, 0.7442190045538762, 0.7430329557751592, 0.7429281203940356, 0.7448417218594543, 0.7457246457148675, 0.7442446159476498, 0.7429189322633065, 0.7427035814923083, 0.7431750531089845, 0.742686210452598, 0.7404337436413616, 0.7421120255778968, 0.7439984785452454, 0.7425867572595879, 0.7413786920102379, 0.7465956613021502]
randomEngagementSTDev = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.02707400759630317, 0.02768049633855653, 0.02888912957963629, 0.028078096347625862, 0.02799311152869918, 0.028560527400338508, 0.029790932596443533, 0.028387035025778582, 0.02754976029705449, 0.026560582518021417, 0.028839894866082558, 0.03085186054256467, 0.029165118093697692, 0.02892592195789639, 0.0287402046425798, 0.028376419672520133, 0.027671607659630153, 0.028022310083291632, 0.028728190632398846, 0.027085653679511074]
randomProfDiffMeans = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.36396510000884913, 0.36329178780064947, 0.36341689233070396, 0.3686737826743591, 0.3613769358700633, 0.36349455935561753, 0.36356234178127733, 0.36070586375363284, 0.35953393656037086, 0.36180289478569494, 0.36366620629868296, 0.3638881136552342, 0.3631702303356244, 0.36393303664326426, 0.36724977634591577, 0.364583752628236, 0.3619004106099238, 0.3641423766699533, 0.3658356803440992, 0.3579795415650477]
randomProfDiffSTDev = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.04030360918998744, 0.04092125125498454, 0.04262178145306518, 0.04153675196843617, 0.04108319025331911, 0.04199130719688392, 0.04398107991386196, 0.04196798150409787, 0.0406791825237113, 0.03938130487302982, 0.042746571173044284, 0.04540359796585924, 0.0427274921476489, 0.042438720102126584, 0.04216380801523759, 0.041844439242354904, 0.04075656836372691, 0.041234836259014786, 0.042168329155403986, 0.039880961496555054]


# ----------------------- [Generate Plots] --------------------------------
# sns.set()
sns.set_palette(sns.color_palette("colorblind"))

timesteps=[i for i in range(maxNumTrainingIterations + numRealIterations)]
timestepsReal=[i for i in range(numRealIterations)]
convValue=[1.0 for i in range(maxNumTrainingIterations + numRealIterations)]
empConvValue=[optimalAbilityMeans[-1] for i in range(maxNumTrainingIterations + numRealIterations)]
totalMin = min(min(randomAbilityMeans[maxNumTrainingIterations:]),min(GIMMEAbilityMeans),min(GIMMEOldAbilityMeans[maxNumTrainingIterations:]),min(optimalAbilityMeans[maxNumTrainingIterations:]))
totalMax = max(max(randomAbilityMeans[maxNumTrainingIterations:]),max(GIMMEAbilityMeans),max(GIMMEOldAbilityMeans[maxNumTrainingIterations:]),max(optimalAbilityMeans[maxNumTrainingIterations:]))

plt.rcParams.update({'font.size': 22})

fig = plt.figure(num=None, figsize=(18, 8), dpi=100, facecolor='w', edgecolor='k')
ax = fig.add_subplot(111)
c1 = collections.BrokenBarHCollection([(0,maxNumTrainingIterations)], (totalMin-0.05,(totalMax-totalMin)+0.1), facecolor="white", alpha=0.5)
# c2 = collections.BrokenBarHCollection([(maxNumTrainingIterations,numRealIterations)], (totalMin-0.05,(totalMax-totalMin)+0.1), facecolor='#bdedcf', alpha=0.5)
ax.add_collection(c1)
# ax.add_collection(c2)
plt.xticks(np.arange(1, numRealIterations+1, step=1.0))


plt.errorbar(timestepsReal, GIMMEAbilityMeans[maxNumTrainingIterations:], GIMMEAbilitySTDev[maxNumTrainingIterations:], marker='s', capsize=2.0, alpha=0.5, label="GIMME strategy (with training)")
plt.errorbar(timestepsReal, GIMMEOldAbilityMeans[maxNumTrainingIterations:], GIMMEOldAbilitySTDev[maxNumTrainingIterations:], marker='s', capsize=2.0, alpha=0.5, label="GIMME strategy (no training)")
# plt.errorbar(timesteps, GIMMEGridAbilityMean, GIMMEGridAbilitySTDev, marker='s', capsize=2.0, alpha=0.5, label="GIMME Grid strategy")
# plt.plot(timesteps, GIMMEEvAbilities, label="GIMME Ev strategy")
plt.errorbar(timestepsReal, randomAbilityMeans[maxNumTrainingIterations:], randomAbilitySTDev[maxNumTrainingIterations:], marker='s', capsize=2.0, alpha=0.5, label="Random strategy")
# plt.errorbar(timesteps, optimalAbilityMeans, optimalAbilitySTDev, marker='s', capsize=2.0, alpha=0.5, label="\"Perfect Information\" strategy")
plt.plot(timestepsReal, empConvValue[maxNumTrainingIterations:], linestyle= "--", label="\"Perfect Information\" convergence value")
plt.xlabel("Iteration", fontsize=30)
plt.ylabel("avg. Ability Increase", fontsize=30)
plt.legend(loc='best', fontsize=20)

plt.savefig('./plotsOnlyOutput/simulationsResultsAbility.png')
plt.show()

quit()

empConvValue=[optimalProfDiffMeans[-1] for i in range(maxNumTrainingIterations + numRealIterations)]

fig = plt.figure(num=None, figsize=(18, 8), dpi=100, facecolor='w', edgecolor='k')
ax = fig.add_subplot(111)
totalMin = min(min(randomProfDiffMeans[maxNumTrainingIterations:]),min(GIMMEProfDiffMeans),min(GIMMEOldProfDiffMeans[maxNumTrainingIterations:]),min(optimalProfDiffMeans[maxNumTrainingIterations:]))
totalMax = max(max(randomProfDiffMeans[maxNumTrainingIterations:]),max(GIMMEProfDiffMeans),max(GIMMEOldProfDiffMeans[maxNumTrainingIterations:]),max(optimalProfDiffMeans[maxNumTrainingIterations:]))
c1 = collections.BrokenBarHCollection([(0,maxNumTrainingIterations)], (totalMin-0.05,(totalMax-totalMin)+0.1), facecolor='#f7e4d4', alpha=0.5)
c2 = collections.BrokenBarHCollection([(maxNumTrainingIterations,numRealIterations)], (totalMin-0.05,(totalMax-totalMin)+0.1), facecolor='#bdedcf', alpha=0.5)
ax.add_collection(c1)
ax.add_collection(c2)


plt.errorbar(timesteps, GIMMEProfDiffMeans, GIMMEProfDiffSTDev, marker='s', capsize=2.0, alpha=0.5, label="GIMME strategy")
plt.errorbar(timestepsReal, GIMMEOldProfDiffMeans[maxNumTrainingIterations:], GIMMEOldProfDiffSTDev[maxNumTrainingIterations:], marker='s', capsize=2.0, alpha=0.5, label="GIMME Old strategy")
# plt.errorbar(timesteps, GIMMEGridProfDiffMean, GIMMEGridProfDiffSTDev, marker='s', capsize=2.0, alpha=0.5, label="GIMME Grid strategy")
plt.errorbar(timestepsReal, randomProfDiffMeans[maxNumTrainingIterations:], randomProfDiffSTDev[maxNumTrainingIterations:], marker='s', capsize=2.0, alpha=0.5, label="Random strategy")
plt.plot(timestepsReal, empConvValue[maxNumTrainingIterations:], linestyle= "--", label="\"Perfect Information\" convergence value")
plt.xlabel("Iteration", fontsize=30)
plt.ylabel("avg. Profile to Pref. dist", fontsize=30)
plt.legend(loc='best', fontsize=20)

plt.savefig('./plotsOnlyOutput/simulationsResultsProfileDist.png', dpi=300, figsize=(6,20))
plt.show()


